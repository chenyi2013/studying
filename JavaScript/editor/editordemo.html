
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>无标题文档</title>
<style>
/*
地址：
http://www.yeebing.com/wp-content/themes/expound/demo/editor/simpleeditor.html
*/
*{
	margin:0;
	padding:0;}
#simpleeditor{
	width:800px;
	height:500px;
	border:1px #CCCCCC solid;
	margin:20px auto!important;
	background-color:#D5D5D5;
	}
/*----------------
工具栏
----------------*/
#editoropera{
	width:100%;
	height:30px;
	background-color:#E1E1E1;
	box-shadow:0 -1px 5px #CCCCCC;
	}
#editoropera ul{
	margin:auto;
	height:20px;
	}
#editoropera li{
	list-style:none;
	display:inline-block;
	width:20px;
	height:100%;
	margin:5px 0 0 2px;
	cursor:pointer;
	position:relative;
	}
#editoropera li:hover{
	background-color:#FFF;
	}
#editoropera button{
	width:100%;
	height:100%;
	background-color:transparent;
	display:block;
	border:none;}
/*设置图标*/
#editorb{
	background:url(editor.png) 0 0;
	}
#editori{
	background:url(editor.png) -20px 0;
	}
#editoru{
	background:url(editor.png) -40px 0;
	}
#editorforecolor{
	background:url(editor.png) -60px 0;
	}
#editorbgcolor{
	background:url(editor.png) -80px 0;
	}
#editorlink{
	background:url(editor.png) -41px -22px;
	}
#editorcut{
	background:url(editor.png) -139px -61px;
	}
#editorcopy{
	background:url(editor.png) -160px -60px;
	}
#editorpaste{
	background:url(editor.png) -39px -61px;
	}
#editorjustifyleft{
	background:url(editor.png) -80px -20px;
	}
#editorjustifycenter{
	background:url(editor.png) -240px -40px;
	}
#editorjustifyright{
	background:url(editor.png) -260px -40px;
	}
#editorindent{
	background:url(editor.png) -220px -40px;
	}
#editorpho{
	width:32px !important;
	height:23px !important;
	background:url(editor.png) -44px -83px;
	margin-top:0 !important;
	border:none !important;
	}
/*字体选择和字号选择*/
#editorfontname{
	border:none !important;
	width:75px !important;
}
#editorfontsize{
	border:none !important;
	width:75px !important;
	}
#editoropera select{
	position:absolute;
	height:115%;
	top:-15%;
	width:100%;
	color:#999;
	font-size:14px;
	}
/*--------------------
编辑区域
------------------*/
#textarea{
	width:90%;
	height:80%;
	border-bottom:1px #CCCCCC solid;
	margin:20px auto;
	outline:none;
	background-color:#FFF;
	box-shadow:0 0 5px 2px #CCCCCC;
	overflow:auto;
	padding:20px;
	}
/*---------------------
文件保存区域
----------------------*/
#savefile{
	width:90%;
	margin:auto;}
#filename{
	width:60px;}
#savefile li{
	list-style:none;
	display:inline-block;}
</style>
</head>
<body>
<div id="simpleeditor">
	<div id="editoropera"><!--工具栏-->
    	<ul>
        	<li id="editorb"><button id="bbtn"></button></li><!--加粗-->
            <li id="editoru"><button id="ubtn"></button></li><!--下划线-->
            <li id="editori"><button id="ibtn"></button></li><!--斜体-->
            <li id="editorforecolor"><button id="fcbtn"></button></li><!--前景色-->
            <li id="editorbgcolor"><button id="bcbtn"></button></li><!--背景色-->
            <li id="editorlink"><button id="lbtn"></button></li><!--超链接-->
            <li id="editorfontname"><!--字体名称-->
            	<select id="fonttype">
  					<option value ='"宋体"'>宋体</option>
  					<option value ='"微软雅黑"'>微软雅黑</option>
 				    <option value="Arial">Arial</option>
  					<option value="Helvetica">Helvetica</option>
				</select>
            </li>
            <li id="editorfontsize"><!--字体大小-->
            	<select id="fontsize">
  					<option id="fontsize1" value ="1">字号1</option>
  					<option id="fontsize2" value ="2">2</option>					<option id="fontsize3" value ="3">3</option>
                    <option id="fontsize4" value ="4">4</option>
                    <option id="fontsize5" value ="5">5</option>
                    <option id="fontsize6" value ="6">6</option>
                    <option id="fontsize7" value ="7">7</option>
				</select>
            </li>
            <li id="editorpho"><button id="phbtn"></button></li><!--插入图片-->
            <li id="editorcut"><button id="cbtn"></button></li><!--剪切-->
            <li id="editorcopy"><button id="cobtn"></button></li><!--复制-->
            <li id="editorpaste"><button id="pasbtn"></button></li><!--粘贴-->
            <li id="editorjustifyleft"><button id="jstlbtn"></button></li><!--左对齐-->
            <li id="editorjustifycenter"><button id="jstcbtn"></button></li><!--居中-->
            <li id="editorjustifyright"><button id="jstrbtn"></button></li><!--右对齐-->
            <li id="editorindent"><button id="indbtn"></button></li><!--缩进-->
        </ul>
	</div><!--editoropera-->
	<div id="textarea" contenteditable="true"><!--文本编辑区域,设置contenteditable为true-->
    	<h1>力宏有了</h1>
    	<img src="http://i2.sinaimg.cn/ent/y/w/2013-11-27/U8711P28T3D4050779F326DT20131127161421.jpg">
　		　<p>新浪娱乐讯 11月27日凌晨，37岁的王力宏[微博]发布微博承认已有女友，还附上了一张与女友的亲密合照。据了解，王力宏的女友是哥伦比亚大学硕士，而王力宏本人则是威廉姆斯学院的荣誉毕业生。除此外，王力宏一家可谓学霸，几乎人人都拥有名牌大学的光环。</p>
　　		 <p>王力宏在微博上公布了其女友身份，称女友名叫李靓蕾，是一名27岁的学生。据了解，李靓蕾是哥伦比亚大学硕士。因为王家几乎人人有拥有显赫的学历背景，有网友调侃说：”得是高学历才能进学历显赫的王家啊。”</p>
　　		 <p>奶奶许留芬是清华大学经济系毕业，著有《会计学原理》、《英汉汉英会计学辞典》等；舅公许倬云台大历史系、芝加哥大学博士毕业，是著名的史学家；然后，王爸爸是台大的，王妈妈是政大的，王力宏的哥哥是耶鲁的学士、芝加哥大学的硕士和博士，嫂嫂则是布朗大学的学士，芝加哥大学的硕士，两人现在在哈佛医学院工作，弟弟是麻省理工的硕士，弟媳是其同学。王力宏自己则是毕业自威廉姆斯学院。真正是学霸一家啊！</p>
　　		 <p>早前，王力宏的弟弟在微博里上传了一段外婆的视频，外婆在里面说希望孙子要找漂亮又有学问的媳妇。看来这次，王力宏的女友准能获得学霸一家的喜欢了。(覃覃/文)</p>
	</div><!--textarea-->
    <div id="savefile"><!--文件保存操作栏-->
    	<ul>
    		<li><input id="filename" type="text" value="文档" placeholder="文件名"/>.html</li>
            <li><button id="savebtn">保存</button></li>
            <li><button id="selectall">全选</button></li>
        </ul>
    </div><!--savefile-->
</div><!--simpleeditor-->

<script>
/*事件操作*/
var EventUtil = {

    addHandler: function(element, type, handler){
        if (element.addEventListener){
            element.addEventListener(type, handler, false);
        } else if (element.attachEvent){
            element.attachEvent("on" + type, handler);
        } else {
            element["on" + type] = handler;
        }
    },
	getEvent: function(event){
        return event ? event : window.event;
    },
    getTarget: function(event){
        return event.target || event.srcElement;
    },
	preventDefault: function(event){
        if (event.preventDefault){
            event.preventDefault();
        } else {
            event.returnValue = false;
        }
    },

    removeHandler: function(element, type, handler){
        if (element.removeEventListener){
            element.removeEventListener(type, handler, false);
        } else if (element.detachEvent){
            element.detachEvent("on" + type, handler);
        } else {
            element["on" + type] = null;
        }
    },
	stopPropagation: function(event){
        if (event.stopPropagation){
            event.stopPropagation();
        } else {
            event.cancelBubble = true;
        }
    }
}
/*换取元素*/
function $_(id){
	return document.getElementById(id);
	}
var SimpleEditor={
	editorArea:$_("textarea"),//编辑区域
	editorOpera:{   //各种操作按钮
			opbold:$_("bbtn"),
			opUnderline:$_("ubtn"),
			opItalic:$_("ibtn"),
			opForeColor:$_("fcbtn"),
			opBgColor:$_("bcbtn"),
			opLink:$_("lbtn"),
			opFontType:$_("fonttype"),
			opFontSize:$_("fontsize"),
			opAddPic:$_("phbtn"),
			opSave:$_("savebtn"),
			opCut:$_("cbtn"),
			opCopy:$_("cobtn"),
			opSelAll:$_("selectall"),
			opPaste:$_("pasbtn"),
			opJustifyCenter:$_("jstcbtn"),
			opJustifyLeft:$_("jstlbtn"),
			opJustifyRight:$_("jstrbtn"),
			opIndent:$_("indbtn")
		},
	setUp:function(){   //初始化,注册事件,调用函数都是SimpleEditor.opera
		for(var opera in SimpleEditor.editorOpera){
			if(opera!="opFontType" && opera!="opFontSize"){
				EventUtil.addHandler(SimpleEditor.editorOpera[opera],"click",SimpleEditor.opera);//按钮注册点击事件
			}
			else{
				EventUtil.addHandler(SimpleEditor.editorOpera[opera],"change",SimpleEditor.opera);//下拉菜单注册变动事件
			}
		}
	},
	opera:function(event){  //根据发生的事件对象选择执行命令
			var event=EventUtil.getEvent(event),
				eventTarget=EventUtil.getTarget(event),
				type="", //命令名称
				optData=null; //附加属性值
			switch(eventTarget.id){
				case "bbtn":type="bold";break;
				case "ubtn":type="underline";break;
				case "ibtn":type="italic";break;
				case "fcbtn":optData=window.prompt("输入颜色值,例如:#FFFFFF","#000000");
							type="forecolor";break;
				case "bcbtn":optData=window.prompt("输入颜色值,例如:#FFFFFF","#000000");
							type="backcolor";break;
				case "lbtn":optData=window.prompt("输入链接","http://");
							type="createlink";break;
				case "fonttype":optData=eventTarget.value;
							type="fontname";break;
				case "fontsize":optData=eventTarget.value;
							type="fontsize";break;	
				case "phbtn":SimpleEditor.textAreaFocus();//插入前必须让编辑区域获得焦点
							optData=window.prompt("输入图片url","http://");
							type="insertimage";break;
				case "savebtn"://另存为只有IE支持,在新窗口打开,不然保存的是整个页面而不是编辑区域里面的内容
							var content=SimpleEditor.editorArea.innerHTML,
							fileName=$_("filename").value,
							openWindow=window.open("","");
							openWindow.document.write(content);
							openWindow.document.execCommand("saveas",fileName+".html");
							break;
				case "cbtn":type="cut";break;
				case "cobtn":type="copy";break;
				case "selectall":SimpleEditor.textAreaFocus(); //同样先得获得焦点
							type="selectall";
							break;
				case "pasbtn":SimpleEditor.textAreaFocus();
							type="paste";
							break;
				case "jstcbtn":SimpleEditor.textAreaFocus();
							type="justifycenter";
							break;
				case "jstlbtn":SimpleEditor.textAreaFocus();
							type="justifyleft";
							break;
				case "jstrbtn":SimpleEditor.textAreaFocus();
							type="justifyright";
							break;
				case "indbtn":type="indent";break;	
			}	
			SimpleEditor.exeCommand(type,optData);
			EventUtil.preventDefault(event);//阻止事件冒泡和默认事件
			EventUtil.stopPropagation(event);
		},
	exeCommand:function(type,optData){  //执行命令,type为命令类型,optData为附加值
			if(document.queryCommandEnabled(type)){ //测试是否可以执行
			document.execCommand(type,false,optData); //第二参数默认为false
			}
		},
	textAreaFocus:function(){ //使编辑区域获取焦点
			SimpleEditor.editorArea.focus();
		}
}
SimpleEditor.setUp();
</script>
</body>
</html>
